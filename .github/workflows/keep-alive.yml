name: Keep Streamlit App Alive

on:
  schedule:
    # Run every 30 minutes to keep the app awake
    - cron: '*/30 * * * *'
  workflow_dispatch: # Allow manual trigger

jobs:
  keep-alive:
    runs-on: ubuntu-latest
    steps:
      - name: Ping Streamlit App
        run: |
          echo "Pinging Streamlit app to keep it awake..."
          curl -f -s -o /dev/null "https://te-araroa-project-rb9stxx4z6sqyhydkpp3ss.streamlit.app/" || echo "App might be sleeping, that's normal"
          
      - name: Wait and Ping Again
        run: |
          echo "Waiting 10 seconds and pinging again..."
          sleep 10
          curl -f -s -o /dev/null "https://te-araroa-project-rb9stxx4z6sqyhydkpp3ss.streamlit.app/" || echo "Second ping completed"
          
      - name: Log Status
        run: |
          echo "‚úÖ Keep-alive ping completed at $(date)"
          echo "üïê Next ping scheduled in 30 minutes"
